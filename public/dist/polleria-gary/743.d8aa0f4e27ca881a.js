"use strict";(self.webpackChunkpolleria_gary=self.webpackChunkpolleria_gary||[]).push([[743],{1743:(he,T,l)=>{l.r(T),l.d(T,{UsuariosModule:()=>be});var f=l(6895),a=l(4006),x=l(3060),P=l(5226),c=l.n(P),e=l(4650),g=l(529),h=l(1005),v=l(4004),U=l(2340);let w=(()=>{class r{constructor(t){this.http=t,this.baseUrl=U.N.baseUrl}validate(t){const n=`${this.baseUrl}/rfc-valid/${t.value}`,s=(new g.WM).set("Authorization",`Bearer ${localStorage.getItem("token")||""}`);return this.http.get(n,{headers:s}).pipe((0,h.g)(1e3),(0,v.U)(m=>!1===m.status?null:{rfcRegistrado:!0}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var C=l(1394),b=l(5358),d=l(8101),p=l(3559);function q(r,i){1&r&&(e.TgZ(0,"mdb-error"),e._uU(1," El campo nombre es obligatorio "),e.qZA())}function R(r,i){if(1&r&&(e.TgZ(0,"mdb-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.rfcErrorMsg," ")}}let M=(()=>{class r{constructor(t,o,n,s){this.fb=t,this.rfcValidator=o,this.providerService=n,this.modalRef=s,this.miFormulario=this.fb.group({nombre:["",[a.kI.required]],rfc:["",[a.kI.required,a.kI.minLength(12),a.kI.maxLength(13)],[this.rfcValidator]]})}get rfcErrorMsg(){const t=this.miFormulario.get("rfc")?.errors;return t?.required?"El campo RFC es obligatorio":t?.rfcRegistrado?"El RFC ya esta dado de alta":t?.minlength||t?.maxlength?"El RFC debe contener 12 caracteres":""}ngOnInit(){this.miFormulario.get("rfc")?.valueChanges.subscribe(t=>{this.miFormulario.get("rfc")?.setValue(t.toUpperCase(),{emitEvent:!1})})}campoNoValido(t){return this.miFormulario.get(t)?.invalid&&this.miFormulario.get(t)?.touched}providerRegister(){console.log(this.miFormulario.value),this.providerService.providerRegister(this.miFormulario.value).subscribe(o=>{!0===o.status?c().fire({title:"\xc9xito",text:o.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}}).then(()=>{this.modalRef.close()}):c().fire({title:"Error",text:o.message,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(w),e.Y36(C.H),e.Y36(b.rn))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-provider-register"]],decls:23,vars:4,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-5","mt-3","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","nombre","required","",1,"form-control"],["mdbLabel","",1,"form-label"],[4,"ngIf"],[1,"row","mb-5","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","rfc","required","",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Agregar proveedor"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.modalRef.close()}),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.providerRegister()}),e.TgZ(5,"div",4)(6,"div",5)(7,"mdb-form-control"),e._UZ(8,"input",6),e.TgZ(9,"label",7),e._uU(10,"Nombre"),e.qZA(),e.YNc(11,q,2,0,"mdb-error",8),e.qZA()(),e.TgZ(12,"div",9)(13,"mdb-form-control"),e._UZ(14,"input",10),e.TgZ(15,"label",7),e._uU(16,"RFC"),e.qZA(),e.YNc(17,R,2,1,"mdb-error",8),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return o.modalRef.close()}),e._uU(20," Cerrar "),e.qZA(),e.TgZ(21,"button",13),e._uU(22," Guardar "),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.miFormulario),e.xp6(7),e.Q6J("ngIf",o.campoNoValido("nombre")),e.xp6(6),e.Q6J("ngIf",o.campoNoValido("rfc")),e.xp6(4),e.Q6J("disabled",o.miFormulario.invalid||o.miFormulario.pending))},dependencies:[f.O5,d.Af,d.VP,d.o8,p.$J,p.pv,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]}),r})(),N=(()=>{class r{constructor(t){this.http=t,this.baseUrl=U.N.baseUrl}validate(t){const o=localStorage.getItem("id_provider"),s=`${this.baseUrl}/rfc-valid-update/${t.value}/${o}`,m=(new g.WM).set("Authorization",`Bearer ${localStorage.getItem("token")||""}`);return this.http.get(s,{headers:m}).pipe((0,h.g)(1e3),(0,v.U)(_e=>!1===_e.status?null:{rfcRegistrado:!0}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function F(r,i){1&r&&(e.TgZ(0,"mdb-error"),e._uU(1," El campo nombre es obligatorio "),e.qZA())}function S(r,i){if(1&r&&(e.TgZ(0,"mdb-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.rfcErrorMsg," ")}}let k=(()=>{class r{constructor(t,o,n,s){this.fb=t,this.providerService=o,this.rfcValidator=n,this.modalRef=s,this.miFormulario=this.fb.group({nombre:["",[a.kI.required]],rfc:["",[a.kI.required,a.kI.minLength(12),a.kI.maxLength(13)],[this.rfcValidator]]})}get rfcErrorMsg(){const t=this.miFormulario.get("rfc")?.errors;return t?.required?"El campo RFC es obligatorio":t?.rfcRegistrado?"El RFC ya esta dado de alta":t?.minlength||t?.maxlength?"El RFC debe contener 12 caracteres":""}ngOnInit(){localStorage.setItem("id_provider",this.id_provider.toString()),this.miFormulario.get("rfc")?.valueChanges.subscribe(t=>{this.miFormulario.get("rfc")?.setValue(t.toUpperCase(),{emitEvent:!1})}),this.providerService.getProvider(this.id_provider).subscribe(t=>{console.log(t),this.provider=t.provider,this.miFormulario.get("nombre")?.setValue(this.provider.nombre),this.miFormulario.get("rfc")?.patchValue(this.provider.rfc)})}campoNoValido(t){return this.miFormulario.get(t)?.invalid&&this.miFormulario.get(t)?.touched}providerUpdate(){console.log(this.miFormulario.value),this.providerService.providerUpdate(this.miFormulario.value,this.id_provider).subscribe(o=>{!0===o.status?c().fire({title:"\xc9xito",text:o.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}}).then(()=>{localStorage.removeItem("id_provider"),this.modalRef.close()}):c().fire({title:"Error",text:o.message,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(C.H),e.Y36(N),e.Y36(b.rn))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-provider-update"]],decls:23,vars:4,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-5","mt-3","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","nombre","required","",1,"form-control"],["mdbLabel","",1,"form-label"],[4,"ngIf"],[1,"row","mb-5","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","rfc","required","",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Agregar proveedor"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.modalRef.close()}),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.providerUpdate()}),e.TgZ(5,"div",4)(6,"div",5)(7,"mdb-form-control"),e._UZ(8,"input",6),e.TgZ(9,"label",7),e._uU(10,"Nombre"),e.qZA(),e.YNc(11,F,2,0,"mdb-error",8),e.qZA()(),e.TgZ(12,"div",9)(13,"mdb-form-control"),e._UZ(14,"input",10),e.TgZ(15,"label",7),e._uU(16,"RFC"),e.qZA(),e.YNc(17,S,2,1,"mdb-error",8),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return o.modalRef.close()}),e._uU(20," Cerrar "),e.qZA(),e.TgZ(21,"button",13),e._uU(22," Guardar "),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.miFormulario),e.xp6(7),e.Q6J("ngIf",o.campoNoValido("nombre")),e.xp6(6),e.Q6J("ngIf",o.campoNoValido("rfc")),e.xp6(4),e.Q6J("disabled",o.miFormulario.invalid||o.miFormulario.pending))},dependencies:[f.O5,d.Af,d.VP,d.o8,p.$J,p.pv,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]}),r})();var y=l(3502),_=l(2469);let I=(()=>{class r{transform(t,o=0,n=""){return 0===n.length?t.slice(o,o+5):t.filter(m=>m.nombre.toLowerCase().trim().includes(n.toLowerCase().trim())).slice(o,o+5)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.Yjl({name:"filtroProviders",type:r,pure:!0}),r})();function J(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"th",23),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"div",24)(9,"button",25),e._UZ(10,"i",26),e.qZA(),e.TgZ(11,"ul",27)(12,"li")(13,"a",28),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.openModalUpdate(s.id))}),e.TgZ(14,"div",29),e._UZ(15,"i",30),e._uU(16," Editar "),e.qZA()()(),e.TgZ(17,"li")(18,"a",28),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.deleteProvider(s.id))}),e.TgZ(19,"div",31),e._UZ(20,"i",32),e._uU(21," Eliminar "),e.qZA()()()()()()()}if(2&r){const t=i.$implicit,o=i.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(t.nombre),e.xp6(2),e.Oqu(t.rfc)}}let O=(()=>{class r{constructor(t,o){this.providerService=t,this.modalService=o,this.namePage="PROVEEDORES",this.modalRef=null,this.modalRefUpdate=null,this.provider=[],this.page=0,this.search=""}ngOnInit(){this.loadProviders()}loadProviders(){this.providerService.getProviders().subscribe(t=>{this.provider=t.providers,console.log("provider --\x3e",this.provider)})}deleteProvider(t){this.providerService.providerDelete(t).subscribe(o=>{!0===o.status?c().fire({title:"\xc9xito",text:o.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}}).then(()=>{this.loadProviders()}):c().fire({title:"Error",text:o.message,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}})})}openModal(){this.modalRef=this.modalService.open(M),this.modalRef.onClose.subscribe(t=>{this.loadProviders()})}openModalUpdate(t){this.modalRefUpdate=this.modalService.open(k,{data:{id_provider:t}}),this.modalRefUpdate.onClose.subscribe(o=>{localStorage.removeItem("id_provider"),this.loadProviders()})}nextPage(){this.page+=5}prevPage(){this.page>0&&(this.page-=5)}onSearchProvider(t){this.page=0,this.search=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(C.H),e.Y36(b.Bh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-providers"]],decls:42,vars:11,consts:[[3,"namePage"],[1,"container"],[1,"row","mb-sm-2","mb-md-2","mb-lg-2"],[1,"col-sm-12","col-md-12","col-lg-12"],[1,"float-start"],["mdbInput","","type","text",1,"form-control",3,"keyup"],["txtSearch",""],["mdbLabel","","for","form1",1,"form-label"],[1,"fa-solid","fa-magnifying-glass"],[1,"float-end"],[1,"btn","btn-primary",3,"click"],[1,"row"],[1,"table-responsive"],[1,"table"],["scope","col-sm-12 col-md-12 col-lg-12"],[4,"ngFor","ngForOf"],[1,"hr","hr-blurry"],[1,"container","px-4","text-end"],[1,"row","gx-5"],[1,"col"],[1,"p-3"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],["scope","row"],["mdbDropdown","",1,"dropdown"],["type","button","id","dropdownMenuButton","aria-expanded","false","mdbDropdownToggle","",1,"btn","btn-primary","dropdown-toggle"],[1,"fa-solid","fa-gears","fa-2x"],["mdbDropdownMenu","","aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"text-primary"],[1,"mx-3","fa-solid","fa-pen-to-square"],[1,"text-danger"],[1,"mx-3","fa-solid","fa-trash"]],template:function(t,o){if(1&t){const n=e.EpF();e._UZ(0,"app-navbar",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"mdb-form-control")(6,"input",5,6),e.NdJ("keyup",function(){e.CHM(n);const m=e.MAs(7);return e.KtG(o.onSearchProvider(m.value))}),e.qZA(),e.TgZ(8,"label",7),e._uU(9," Buscar usuario \xa0 "),e._UZ(10,"i",8),e.qZA()()(),e.TgZ(11,"div",9)(12,"button",10),e.NdJ("click",function(){return o.openModal()}),e._uU(13," Agregar proveedor "),e.qZA()()()(),e.TgZ(14,"div",11)(15,"div",3)(16,"div",12)(17,"table",13)(18,"thead")(19,"tr")(20,"th",14),e._uU(21,"#"),e.qZA(),e.TgZ(22,"th",14),e._uU(23,"Nombre"),e.qZA(),e.TgZ(24,"th",14),e._uU(25,"RFC"),e.qZA(),e.TgZ(26,"th",14),e._uU(27,"Acciones"),e.qZA()()(),e.TgZ(28,"tbody"),e.YNc(29,J,22,3,"tr",15),e.ALo(30,"filtroProviders"),e.qZA()()()()(),e._UZ(31,"hr",16),e.TgZ(32,"div",17)(33,"div",18)(34,"div",19)(35,"div",20)(36,"button",21),e.NdJ("click",function(){return o.prevPage()}),e._uU(37," Anteriores "),e.qZA(),e._uU(38," \xa0 "),e.TgZ(39,"button",22),e.NdJ("click",function(){return o.nextPage()}),e.ALo(40,"filtroProviders"),e._uU(41," Siguientes "),e.qZA()()()()()()}2&t&&(e.Q6J("namePage",o.namePage),e.xp6(29),e.Q6J("ngForOf",e.Dn7(30,3,o.provider,o.page,o.search)),e.xp6(10),e.Q6J("disabled",0===e.Dn7(40,7,o.provider,o.page,o.search).length))},dependencies:[f.sg,y.S,_.gl,_.iM,_.$U,d.Af,d.VP,d.o8,I]}),r})();var A=l(7974),u=l(7155);let V=(()=>{class r{constructor(){}camposIguales(t,o){return n=>{const s=n.get(t)?.value,m=n.get(o)?.value;return s!==m?(n.get(o)?.setErrors({noIguales:!0}),{noIguales:!0}):(m&&n.get(o)?.setErrors(null),null)}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Y=(()=>{class r{constructor(t){this.http=t,this.baseUrl=U.N.baseUrl}validate(t){const n=`${this.baseUrl}/user-valid/${t.value}`,s=(new g.WM).set("Authorization",`Bearer ${localStorage.getItem("token")||""}`);return this.http.get(n,{headers:s}).pipe((0,h.g)(1e3),(0,v.U)(m=>!1===m.status?null:{usuarioTomado:!0}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(g.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Z=l(8019);function B(r,i){1&r&&(e.TgZ(0,"mdb-error"),e._uU(1," El campo usuario es obligatorio "),e.qZA())}function E(r,i){if(1&r&&(e.TgZ(0,"mdb-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.usuarioErrorMsg," ")}}function L(r,i){if(1&r&&(e.TgZ(0,"mdb-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.getpasswordMsg," ")}}function Q(r,i){if(1&r&&(e.TgZ(0,"mdb-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.getPassConfirmMsg," ")}}let $=(()=>{class r{constructor(t,o,n,s,m){this.fb=t,this.validatorService=o,this.userValidator=n,this.usersService=s,this.modalRef=m,this.miFormulario=this.fb.group({nombre:["",[a.kI.required]],usuario:["",[a.kI.required],[this.userValidator]],password:["",[a.kI.required,a.kI.minLength(8)]],password_confirmation:["",[a.kI.required]]},{validators:[this.validatorService.camposIguales("password","password_confirmation")]})}get usuarioErrorMsg(){const t=this.miFormulario.get("usuario")?.errors;return t?.required?"El campo usuario es obligatorio":t?.usuarioTomado?"El usuario ya fue tomado":""}get getpasswordMsg(){const t=this.miFormulario.get("password")?.errors;return t?.required?"El campo contrase\xf1a es obligatorio":t?.minlength?"La contrase\xf1a debe de ser mayor a 8 caracteres":""}get getPassConfirmMsg(){const t=this.miFormulario.get("password_confirmation")?.errors;return t?.required?"La confirmaci\xf3n de la contrase\xf1a es obligatoria":t?.noIguales?"Las contrase\xf1as deben de ser iguales":""}ngOnInit(){}campoNoValido(t){return this.miFormulario.get(t)?.invalid&&this.miFormulario.get(t)?.touched}userRegister(){this.miFormulario.invalid?this.miFormulario.markAllAsTouched():this.usersService.userRegister(this.miFormulario.value).subscribe(o=>{!0===o.status?c().fire({title:"\xc9xito",text:o.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}}).then(()=>{this.modalRef.close()}):c().fire({title:"Error",text:o.message,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(V),e.Y36(Y),e.Y36(Z.f),e.Y36(b.rn))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-register"]],decls:35,vars:6,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-5","mt-3","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","nombre","required","",1,"form-control"],["mdbLabel","",1,"form-label"],[4,"ngIf"],[1,"row","mb-5","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","usuario","required","",1,"form-control"],["mdbValidate","","mdbInput","","type","password","formControlName","password","required","",1,"form-control"],["mdbValidate","","mdbInput","","type","password","formControlName","password_confirmation","required","",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Agregar usuario"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.modalRef.close()}),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.userRegister()}),e.TgZ(5,"div",4)(6,"div",5)(7,"mdb-form-control"),e._UZ(8,"input",6),e.TgZ(9,"label",7),e._uU(10,"Nombre"),e.qZA(),e.YNc(11,B,2,0,"mdb-error",8),e.qZA()(),e.TgZ(12,"div",9)(13,"mdb-form-control"),e._UZ(14,"input",10),e.TgZ(15,"label",7),e._uU(16,"Usuario"),e.qZA(),e.YNc(17,E,2,1,"mdb-error",8),e.qZA()(),e.TgZ(18,"div",9)(19,"mdb-form-control"),e._UZ(20,"input",11),e.TgZ(21,"label",7),e._uU(22,"Contrase\xf1a"),e.qZA(),e.YNc(23,L,2,1,"mdb-error",8),e.qZA()(),e.TgZ(24,"div",9)(25,"mdb-form-control"),e._UZ(26,"input",12),e.TgZ(27,"label",7),e._uU(28,"Confirmar contrase\xf1a"),e.qZA(),e.YNc(29,Q,2,1,"mdb-error",8),e.qZA()()(),e.TgZ(30,"div",13)(31,"button",14),e.NdJ("click",function(){return o.modalRef.close()}),e._uU(32," Cerrar "),e.qZA(),e.TgZ(33,"button",15),e._uU(34," Guardar "),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.miFormulario),e.xp6(7),e.Q6J("ngIf",o.campoNoValido("nombre")),e.xp6(6),e.Q6J("ngIf",o.campoNoValido("usuario")),e.xp6(6),e.Q6J("ngIf",o.campoNoValido("password")),e.xp6(6),e.Q6J("ngIf",o.campoNoValido("password_confirmation")),e.xp6(4),e.Q6J("disabled",o.miFormulario.pending))},dependencies:[f.O5,d.Af,d.VP,d.o8,p.$J,p.pv,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]}),r})();function D(r,i){1&r&&(e.TgZ(0,"mdb-error"),e._uU(1," El campo nombre es obligatorio "),e.qZA())}function G(r,i){1&r&&(e.TgZ(0,"mdb-error"),e._uU(1," El campo usuario es obligatorio "),e.qZA())}let j=(()=>{class r{constructor(t,o,n){this.fb=t,this.usersService=o,this.modalRef=n,this.miFormulario=this.fb.group({nombre:["",[a.kI.required]],usuario:["",[a.kI.required]]})}ngOnInit(){this.usersService.getUser(this.id_user).subscribe(t=>{this.user=t.usuario,this.miFormulario.get("nombre")?.setValue(this.user.nombre),this.miFormulario.get("usuario")?.patchValue(this.user.usuario)})}campoNoValido(t){return this.miFormulario.get(t)?.invalid&&this.miFormulario.get(t)?.touched}userUpdate(){this.usersService.userUpdate(this.miFormulario.value,this.id_user).subscribe(o=>{!0===o.status?c().fire({title:"\xc9xito",text:o.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}}).then(()=>{this.modalRef.close()}):c().fire({title:"Error",text:"El nombre de usuario ya existe",icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(Z.f),e.Y36(b.rn))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-update"]],decls:23,vars:4,consts:[[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Cerrar",1,"btn-close",3,"click"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-5","mt-3","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","nombre","required","",1,"form-control"],["mdbLabel","",1,"form-label"],[4,"ngIf"],[1,"row","mb-5","ms-3","me-3"],["mdbValidate","","mdbInput","","type","text","formControlName","usuario","required","",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Actualizar usuario"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.modalRef.close()}),e.qZA()(),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return o.userUpdate()}),e.TgZ(5,"div",4)(6,"div",5)(7,"mdb-form-control"),e._UZ(8,"input",6),e.TgZ(9,"label",7),e._uU(10,"Nombre"),e.qZA(),e.YNc(11,D,2,0,"mdb-error",8),e.qZA()(),e.TgZ(12,"div",9)(13,"mdb-form-control"),e._UZ(14,"input",10),e.TgZ(15,"label",7),e._uU(16,"Usuario"),e.qZA(),e.YNc(17,G,2,0,"mdb-error",8),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return o.modalRef.close()}),e._uU(20," Cerrar "),e.qZA(),e.TgZ(21,"button",13),e._uU(22," Actualizar "),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",o.miFormulario),e.xp6(7),e.Q6J("ngIf",o.campoNoValido("nombre")),e.xp6(6),e.Q6J("ngIf",o.campoNoValido("usuario")),e.xp6(4),e.Q6J("disabled",o.miFormulario.pending))},dependencies:[f.O5,d.Af,d.VP,d.o8,p.$J,p.pv,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u],styles:[".row[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--mdb-gutter-x) * -1.5);padding-left:calc(var(--mdb-gutter-x) * -1.5);margin-top:var(--mdb-gutter-y)}"]}),r})();var z=l(1572);function H(r,i){1&r&&e._UZ(0,"mat-spinner")}function X(r,i){if(1&r&&(e.TgZ(0,"div",27),e.YNc(1,H,1,0,"mat-spinner",28),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoadingResults)}}function K(r,i){1&r&&(e.TgZ(0,"th",29),e._uU(1,"#"),e.qZA())}function W(r,i){if(1&r&&(e.TgZ(0,"td",30)(1,"span",31),e._uU(2,"#"),e.qZA(),e._uU(3),e.qZA()),2&r){const t=i.index;e.xp6(3),e.hij(" ",t+1," ")}}function ee(r,i){1&r&&(e.TgZ(0,"th",29),e._uU(1,"Nombre"),e.qZA())}function te(r,i){if(1&r&&(e.TgZ(0,"td",30)(1,"span",31),e._uU(2,"Nombre"),e.qZA(),e._uU(3),e.qZA()),2&r){const t=i.$implicit;e.xp6(3),e.hij(" ",t.nombre," ")}}function re(r,i){1&r&&(e.TgZ(0,"th",29),e._uU(1,"Usuario"),e.qZA())}function oe(r,i){if(1&r&&(e.TgZ(0,"td",30)(1,"span",31),e._uU(2,"Usuario"),e.qZA(),e._uU(3),e.qZA()),2&r){const t=i.$implicit;e.xp6(3),e.hij(" ",t.usuario," ")}}function ie(r,i){1&r&&(e.TgZ(0,"th",29),e._uU(1,"Acciones"),e.qZA())}function ne(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"td",30)(1,"div",32)(2,"button",33),e._UZ(3,"i",34),e.qZA(),e.TgZ(4,"ul",35)(5,"li")(6,"a",36),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.openModalUpdate(s.id))}),e.TgZ(7,"div",37),e._UZ(8,"i",38),e._uU(9," Editar "),e.qZA()()(),e.TgZ(10,"li")(11,"a",36),e.NdJ("click",function(){const s=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.deleteUser(s.id))}),e.TgZ(12,"div",39),e._UZ(13,"i",40),e._uU(14," Eliminar "),e.qZA()()()()()()}}function ae(r,i){1&r&&e._UZ(0,"tr",41)}function se(r,i){1&r&&e._UZ(0,"tr",42)}function le(r,i){if(1&r&&(e.TgZ(0,"tr",43)(1,"td",44),e._uU(2),e.qZA()()),2&r){e.oxw();const t=e.MAs(8);e.xp6(2),e.hij(' No hay datos que coincidan con: "',t.value,'" ')}}const me=function(){return[5,10,25,100]},de=(r,i,t)=>{if(0==t||0==i)return`0 van ${t}`;const o=r*i;return`${o+1} - ${o<(t=Math.max(t,0))?Math.min(o+i,t):o+i} de ${t}`},ce=[{path:"",children:[{path:"providers",component:O},{path:"users",component:(()=>{class r{constructor(t,o){this.usersService=t,this.modalService=o,this.namePage="USUARIOS",this.modalRef=null,this.modalRefUpdate=null,this.users=[],this.page=0,this.search="",this.isLoadingResults=!0,this.displayedColumns=["#","Nombre","Usuario","Acciones"]}ngOnInit(){this.loadUsers()}applyFilter(t){this.dataSource.filter=t.target.value.toLowerCase().trim(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}loadUsers(){this.usersService.getUsers().subscribe(t=>{this.users=t.usuario,this.dataSource=new u.by(this.users),this.paginator._intl.itemsPerPageLabel="usuarios por p\xe1gina",this.paginator._intl.nextPageLabel="p\xe1gina siguiente",this.paginator._intl.previousPageLabel="p\xe1gina anterior",this.paginator._intl.getRangeLabel=de,this.dataSource.paginator=this.paginator,this.isLoadingResults=!1})}openModal(){this.modalRef=this.modalService.open($),this.modalRef.onClose.subscribe(t=>{this.loadUsers()})}openModalUpdate(t){this.modalRefUpdate=this.modalService.open(j,{data:{id_user:t}}),this.modalRefUpdate.onClose.subscribe(o=>{this.loadUsers()})}deleteUser(t){c().fire({title:"\xbfEst\xe1s seguro?",text:"\xa1No podr\xe1s revertir esto!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0f1765",cancelButtonColor:"#d33",confirmButtonText:"\xa1S\xed, elim\xednalo!",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&this.usersService.userDelete(t).subscribe(n=>{!0===n.status?c().fire({title:"\xc9xito",text:n.message,icon:"success",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}}).then(()=>{this.loadUsers()}):c().fire({title:"Error",text:n.message,icon:"error",confirmButtonText:"Aceptar",confirmButtonColor:"#0f1765",customClass:{container:"my-swal"}})})})}nextPage(){this.page+=5}prevPage(){this.page>0&&(this.page-=5)}onSearchUsuario(t){this.page=0,this.search=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Z.f),e.Y36(b.Bh))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users"]],viewQuery:function(t,o){if(1&t&&e.Gf(A.NW,5),2&t){let n;e.iGM(n=e.CRH())&&(o.paginator=n.first)}},decls:37,vars:7,consts:[[3,"namePage"],[1,"container"],[1,"row"],[1,"row","mb-sm-2","mb-md-2","mb-lg-2","mt-5"],[1,"col-sm-12","col-md-12","col-lg-12"],[1,"float-start"],["mdbInput","",1,"form-control",3,"keyup"],["input",""],["mdbLabel","","for","form1",1,"form-label"],[1,"fa-solid","fa-magnifying-glass"],[1,"float-end"],[1,"btn","btn-primary",3,"click"],[1,"data-container","mat-elevation-z8","mt-3"],["class","loading-shade",4,"ngIf"],[1,"table-responsive"],["mat-table","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Nombre"],["matColumnDef","Usuario"],["matColumnDef","Acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"hr","hr-blurry"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[1,"mobile-label"],["mdbDropdown","",1,"dropdown"],["type","button","id","dropdownMenuButton","aria-expanded","false","mdbDropdownToggle","",1,"btn","btn-primary","dropdown-toggle"],[1,"fa-solid","fa-gears","fa-2x"],["mdbDropdownMenu","","aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"text-primary"],[1,"mx-3","fa-solid","fa-pen-to-square"],[1,"text-danger"],[1,"mx-3","fa-solid","fa-trash"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,o){1&t&&(e._UZ(0,"app-navbar",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"mdb-form-control")(7,"input",6,7),e.NdJ("keyup",function(s){return o.applyFilter(s)}),e.qZA(),e.TgZ(9,"label",8),e._uU(10," Buscar usuario \xa0 "),e._UZ(11,"i",9),e.qZA()()(),e.TgZ(12,"div",10)(13,"button",11),e.NdJ("click",function(){return o.openModal()}),e._uU(14," Agregar usuario "),e.qZA()()()(),e.TgZ(15,"div",4)(16,"div",12),e.YNc(17,X,2,1,"div",13),e.TgZ(18,"div",14)(19,"table",15),e.ynx(20,16),e.YNc(21,K,2,0,"th",17),e.YNc(22,W,4,1,"td",18),e.BQk(),e.ynx(23,19),e.YNc(24,ee,2,0,"th",17),e.YNc(25,te,4,1,"td",18),e.BQk(),e.ynx(26,20),e.YNc(27,re,2,0,"th",17),e.YNc(28,oe,4,1,"td",18),e.BQk(),e.ynx(29,21),e.YNc(30,ie,2,0,"th",17),e.YNc(31,ne,15,0,"td",18),e.BQk(),e.YNc(32,ae,1,0,"tr",22),e.YNc(33,se,1,0,"tr",23),e.YNc(34,le,3,1,"tr",24),e.qZA()(),e._UZ(35,"mat-paginator",25),e.qZA()()()(),e._UZ(36,"hr",26)),2&t&&(e.Q6J("namePage",o.namePage),e.xp6(17),e.Q6J("ngIf",o.isLoadingResults),e.xp6(2),e.Q6J("dataSource",o.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(6,me)))},dependencies:[f.O5,y.S,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,u.Ee,A.NW,z.Ou,_.gl,_.iM,_.$U,d.Af,d.VP,d.o8],styles:["a[_ngcontent-%COMP%]{cursor:pointer}.data-container[_ngcontent-%COMP%]{position:relative}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px;max-height:400px;overflow:auto}table[_ngcontent-%COMP%]{width:100%}tr.mat-row[_ngcontent-%COMP%]{height:68px;width:auto}.loading-shade[_ngcontent-%COMP%]{position:absolute;inset:0 0 56px;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.mobile-label[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 990px){.mat-elevation-z8[_ngcontent-%COMP%]{background:transparent;box-shadow:none}.mat-header-row[_ngcontent-%COMP%]{display:none}tbody[_ngcontent-%COMP%]{display:block;width:100%}.mat-table[_ngcontent-%COMP%]{background:transparent}.mat-table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]{align-items:start;display:block;overflow:hidden;height:auto;position:relative;clear:both;box-shadow:#00000026 1.95px 1.95px 2.6px;background-color:#fff;border-radius:3px}.mat-table[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%] + .mat-row[_ngcontent-%COMP%]{margin-top:24px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{display:block;width:100%;padding:0 16px;margin:16px 0;border:0 none}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child{padding:0 48px 0 16px}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child   a[_ngcontent-%COMP%]{font-size:20px;color:inherit}.mat-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]:first-child:before{display:none}.mat-table[_ngcontent-%COMP%]   .mat-cell.m-card-sub-title[_ngcontent-%COMP%]{margin-top:-8px;padding:0 48px 0 16px;color:#0000008a}.mat-table[_ngcontent-%COMP%]   .has_label_on_mobile[_ngcontent-%COMP%]:before{content:attr(data-label);display:inline;font-weight:400}.mat-table[_ngcontent-%COMP%]   .mat-column-star[_ngcontent-%COMP%]{width:auto;padding:8px 0 0!important;margin:0;position:absolute;top:0;right:0}.mat-table[_ngcontent-%COMP%]   .mat-column-star[_ngcontent-%COMP%]:before{display:none}.mobile-label[_ngcontent-%COMP%]{width:50%;display:inline-block;font-weight:700}.mat-paginator[_ngcontent-%COMP%]{margin-top:24px}}"]}),r})()},{path:"**",redirectTo:"users"}]}];let ue=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[x.Bz.forChild(ce),x.Bz]}),r})();var pe=l(4466),fe=l(8563),ge=l(1495);let be=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[f.ez,ue,pe.m,fe.q,ge.$,a.UX]}),r})()}}]);